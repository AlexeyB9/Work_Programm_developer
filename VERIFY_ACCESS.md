# ✅ Проверка доступности приложения

## Ваш порт проброшен правильно! ✅

Вывод `docker port guap` показывает:
```
8000/tcp -> 0.0.0.0:8000      # IPv4 - доступно извне
8000/tcp -> [::]:8000         # IPv6 - доступно извне
```

Это означает что Docker правильно пробросил порт на все интерфейсы.

## Проверка работы:

### 1. Проверьте что приложение отвечает локально:

```bash
# Должен вернуть HTML страницу
curl http://localhost:8000

# Или более подробно
curl -v http://localhost:8000
```

### 2. Узнайте IP вашего сервера:

```bash
# Вариант 1
hostname -I

# Вариант 2
ip addr show | grep "inet " | grep -v 127.0.0.1

# Вариант 3
curl ifconfig.me
```

### 3. Проверьте доступ извне:

С другого компьютера или используя внешний IP:

```bash
# Замените YOUR_SERVER_IP на IP вашего сервера
curl http://YOUR_SERVER_IP:8000
```

Или откройте в браузере: `http://YOUR_SERVER_IP:8000`

## Если curl проходит, но браузер не открывает:

### Проблема 1: Файрвол блокирует

```bash
# Ubuntu/Debian
sudo ufw status
sudo ufw allow 8000/tcp
sudo ufw reload

# CentOS/RHEL
sudo firewall-cmd --list-ports
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --reload
```

### Проблема 2: Провайдер блокирует порт

Некоторые провайдеры блокируют нестандартные порты. Решения:
- Используйте порт 80 или 443 (требует sudo)
- Настройте Nginx как reverse proxy
- Используйте VPN или туннель

### Проблема 3: Проблемы с DNS

Если используете домен, проверьте что он указывает на правильный IP:
```bash
nslookup ваш_домен.com
```

## Использование стандартных портов (80/443):

Если хотите использовать порт 80 (HTTP) или 443 (HTTPS):

### Вариант 1: Изменить порт в docker-compose.yml

```yaml
ports:
  - "0.0.0.0:80:8000"  # Внешний порт 80, внутренний 8000
```

Затем:
```bash
docker-compose down
docker-compose up -d
```

**Важно:** Порт 80 требует sudo или настройки capabilities.

### Вариант 2: Использовать Nginx (рекомендуется)

Установите Nginx и настройте reverse proxy (см. FIREWALL_SETUP.md)

## Финальная проверка:

```bash
# 1. Статус контейнера
docker ps | grep guap

# 2. Проброшенные порты
docker port guap

# 3. Логи приложения
docker-compose logs --tail=20 guap

# 4. Тест локального доступа
curl http://localhost:8000

# 5. Тест внешнего доступа (замените IP)
curl http://YOUR_SERVER_IP:8000

# 6. Проверка файрвола
sudo ufw status | grep 8000
```

## Если все работает локально, но не извне:

1. **Проверьте файрвол** - это самая частая причина
2. **Проверьте что используете правильный IP** - внешний IP, не localhost
3. **Проверьте у провайдера** - некоторые блокируют порты
4. **Проверьте что сервер доступен** - `ping YOUR_SERVER_IP`

## Быстрый тест:

```bash
# Запустите на сервере
python3 -m http.server 8001

# С другого компьютера попробуйте открыть
# http://YOUR_SERVER_IP:8001
# Если работает - значит файрвол настроен правильно
# Если не работает - проблема в файрволе
```

