# üîç –û—Ç–ª–∞–¥–∫–∞ –æ—à–∏–±–æ–∫ 500

## –û—à–∏–±–∫–∞: "Connection error" –∏–ª–∏ "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ API"

### –ü—Ä–∏—á–∏–Ω–∞ 1: PPLX_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec guap env | grep PPLX_API_KEY

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞—à –∫–ª—é—á
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç:
   ```env
   PPLX_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
   ```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
   ```bash
   docker-compose restart
   ```

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `pplx-`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –∏–ª–∏ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á –∞–∫—Ç—É–∞–ª–µ–Ω (–Ω–µ –∏—Å—Ç–µ–∫)

### –ü—Ä–∏—á–∏–Ω–∞ 3: –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec guap curl -v https://api.perplexity.ai

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª - –≤–æ–∑–º–æ–∂–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫

### –ü—Ä–∏—á–∏–Ω–∞ 4: –§–∞–π–ª —à–∞–±–ª–æ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec guap ls -la /app/files/–®–∞–±–ª–æ–Ω.docx

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª
```

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª `files/–®–∞–±–ª–æ–Ω.docx` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ volume –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–±—Ä–æ—à–µ–Ω –≤ docker-compose.yml

## –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose logs -f guap

# –ò–ª–∏
docker logs -f guap

# –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å "ERROR", "Exception", "Traceback"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
docker exec guap env

# –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ
docker exec guap env | grep -E "PPLX|TELEGRAM|PORT"
```

## –¢–µ—Å—Ç API –∫–ª—é—á–∞ –≤—Ä—É—á–Ω—É—é

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it guap /bin/bash

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
python3 -c "
import os
from openai import OpenAI

key = os.getenv('PPLX_API_KEY')
if not key:
    print('‚ùå PPLX_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')
    exit(1)

print(f'‚úÖ –ö–ª—é—á –Ω–∞–π–¥–µ–Ω (–¥–ª–∏–Ω–∞: {len(key)})')

client = OpenAI(api_key=key, base_url='https://api.perplexity.ai')
try:
    response = client.chat.completions.create(
        model='sonar',
        messages=[{'role': 'user', 'content': 'test'}],
        max_tokens=10
    )
    print('‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç!')
except Exception as e:
    print(f'‚ùå –û—à–∏–±–∫–∞ API: {e}')
"
```

## –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cat .env

# 2. –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ
nano .env
# –î–æ–±–∞–≤—å—Ç–µ: PPLX_API_KEY=–≤–∞—à_–∫–ª—é—á

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose restart

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs -f guap
```

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| "PPLX_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –∑–∞–¥–∞–Ω–∞ | –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª |
| "Connection error" | –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å –∏ —Ñ–∞–π—Ä–≤–æ–ª |
| "Authentication failed" | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –≤ .env |
| "File not found" | –®–∞–±–ª–æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ files/–®–∞–±–ª–æ–Ω.docx —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |

